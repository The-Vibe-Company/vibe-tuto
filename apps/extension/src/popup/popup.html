<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vibe Tuto</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="logo">Vibe Tuto</h1>
      <p id="user-email" class="user-email hidden"></p>
    </header>

    <main class="main">
      <div id="not-connected" class="state">
        <div class="state-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        <p class="message">Connectez-vous pour commencer</p>
        <button id="login-btn" class="btn btn-primary">Se connecter</button>
      </div>

      <div id="idle" class="state hidden">
        <div class="state-icon idle-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polygon points="10 8 16 12 10 16 10 8" fill="currentColor"></polygon>
          </svg>
        </div>
        <p class="message">Prêt à enregistrer votre tutoriel</p>
        <button id="start-btn" class="btn btn-primary btn-record">
          <span class="record-dot"></span>
          Démarrer l'enregistrement
        </button>
      </div>

      <div id="recording" class="state hidden">
        <div class="recording-status">
          <div class="recording-indicator">
            <span class="pulse"></span>
            <span>Enregistrement</span>
          </div>
          <div id="timer" class="timer">00:00</div>
        </div>
        <p class="message recording-message">Cliquez sur les éléments à capturer</p>
        <button id="stop-btn" class="btn btn-danger">
          <span class="stop-icon"></span>
          Arrêter l'enregistrement
        </button>
      </div>

      <div id="uploading" class="state hidden">
        <div class="state-icon">
          <div class="spinner"></div>
        </div>
        <p class="message">Envoi en cours...</p>
      </div>

      <div id="success" class="state hidden">
        <div class="state-icon success-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <p class="message">Tutoriel créé avec succès !</p>
        <a id="editor-link" href="#" class="btn btn-primary">Voir le tutoriel</a>
        <button id="new-recording-btn" class="btn btn-secondary">Nouvel enregistrement</button>
      </div>

      <div id="error" class="state hidden">
        <div class="state-icon error-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="15" y1="9" x2="9" y2="15"></line>
            <line x1="9" y1="9" x2="15" y2="15"></line>
          </svg>
        </div>
        <p id="error-message" class="message error-message">Une erreur est survenue</p>
        <button id="retry-btn" class="btn btn-primary">Réessayer</button>
      </div>
    </main>

    <footer class="footer">
      <a href="#" id="dashboard-link" class="link">Ouvrir le dashboard</a>
    </footer>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
